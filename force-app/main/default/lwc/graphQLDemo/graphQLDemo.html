<template>
    <lightning-card title="GraphQL Demo">

        <template lwc:if={isLoading}>
            <lightning-spinner alternative-text="loading"></lightning-spinner>
        </template>

        <div class="slds-var-p-around_medium">

            <lightning-layout vertical-align="end" class="slds-var-p-around_small">
                <lightning-layout-item size="11">
                    <lightning-input label="Search Accounts/Contacts By Name" value={searchKey} onchange={handleSearchKeyChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="1" class="slds-var-p-left_small">
                    <lightning-button-icon icon-name="utility:refresh" onclick={refresh}></lightning-button-icon>
                </lightning-layout-item>
            </lightning-layout>

            <template lwc:if={errorMsg}>
                <p class="error">{errorMsg}</p>
            </template>

            <lightning-tabset active-tab-value={activeTab}>
                <template for:each={tabs} for:item="tab">
                    <lightning-tab label={tab.tabLabel} value={tab.tabValue} onactive={handleActiveTab} key={tab.tabValue}>
                        <lightning-datatable
                            key-field="Id"
                            columns={tab.columns}
                            data={tab.records}
                        ></lightning-datatable>
                        <c-page-controls cursor={tab.cursor} cursor-id={tab.tabValue} page-size={pageSize} total={tab.total} oncursorchange={handleCursorChange}></c-page-controls>
                    </lightning-tab>
                </template>
                <!-- <lightning-tab label={accountsTabLabel} value="Account" onactive={handleActiveTab}>
                    <c-accounts-tab accounts={accounts}></c-accounts-tab>
                </lightning-tab>
                
                <lightning-tab label={contactsTabLabel} value="Contact" onactive={handleActiveTab}>
                    <c-contacts-tab contacts={contacts}></c-contacts-tab>
                </lightning-tab>

                <lightning-tab label={testObjectsTabLabel} value="TestObject__c" onactive={handleActiveTab}>
                    <c-test-objects-tab test-objects={testObjects}></c-test-objects-tab>
                </lightning-tab> -->
            </lightning-tabset>


            
        </div>

        
    </lightning-card>
</template>