<template>
    
    <lightning-layout>
        <lightning-layout-item size="8">
            <lightning-card title="GraphQL Demo">

                <c-gql-demo-query lwc:ref="query" ongqlresult={handleGQLResult} variables={variables}></c-gql-demo-query>            
        
                <div class="slds-var-p-around_medium">
        
                    <c-gql-demo-search-bar onsearchkeychange={handleSearchKeyChange} onrefresh={refresh}></c-gql-demo-search-bar>
        
                    <template lwc:if={errorMsg}>
                        <p class="error">{errorMsg}</p>
                    </template>
        
                    <template lwc:if={tabs}>
                        <c-gql-demo-table-tabset 
                            lwc:ref="tabset"
                            tabs={tabs} 
                            page-size={pageSize} 
                            max-row-selection="1"
                            onpagechange={handlePageChange}
                            onrowselection={handleRowSelection}
                        ></c-gql-demo-table-tabset>
                    </template>
                </div>
            </lightning-card>
        </lightning-layout-item>
        <lightning-layout-item size="4" class="slds-var-p-left_small">
            <c-gql-child-details gql-record={selectedRow}></c-gql-child-details>
        </lightning-layout-item>
    </lightning-layout>
</template>